/**
 * RadialPanel.java
 * This class provides the JPanel objects for the Radial widget.  It also handles events that are 
 * generated by the numberboxes pertaining to the Radial widget fields.
 * Updated by: Jeremy Davis July 1, 2008
 */

package org.webtop.module.waves;

import javax.swing.*; 
import java.awt.Event.*; 

import org.webtop.wsl.client.*; 
import org.webtop.wsl.event.*; 
import org.sdl.gui.numberbox.*;

public class RadialPanel extends SourcePanel implements NumberBox.Listener {

	private FloatBox x, y; 
	private RadialSource rSource; 
	
	public RadialPanel(WSLPlayer player){
		super(player); 
		
		add(new JLabel("X:", JLabel.RIGHT)); 
		x = makePositionBox(); 
		x.addNumberListener(this); 
		add(x); 
		
		add(new JLabel("Y:", JLabel.RIGHT)); 
		y = makePositionBox(); 
		y.addNumberListener(this); 
		add(y); 
	}
	
	public void show(RadialSource s){
		super.show(s); 
		
		if(s!=null){
			setXY(s.getX(), s.getY());
			x.setEnabled(true); 
			y.setEnabled(true); 
		}
		else{
			x.setEnabled(false); 
			y.setEnabled(false); 
		}
		rSource = s; 
	}
	
	public void setX(float X){
		x.silence(); 
		x.setSigValue(X, SIG_DIGITS);
	}
	
	public void setY(float Y){
		y.silence(); 
		y.setSigValue(Y, SIG_DIGITS);
	}
	
	public void setXY(float X, float Y){
		setX(X); 
		setY(Y); 
	}
	
	//The following 3 methods implement NumberBox.Listener
	public void numChanged(NumberBox eventSource, Number newValue){
		if(wslPlayer.isPlaying())
			return; 
		
		if(eventSource == x){
			rSource.setX(new Float(x.getText()).floatValue(), true);
		}
		else if(eventSource == y){
			rSource.setY(new Float(y.getText()).floatValue(), true); 
		}
		
		super.numChanged(eventSource, newValue); 
	}
	
	public void invalidEntry(NumberBox src, Number badVal){
		
	}
	
	public void boundsForcedChange(NumberBox src, Number val){
		
	}
}
